{% extends "base.html" %}

{% block title %}Player Leaderboard{% endblock %}

{% block content %}
    <!-- Loading overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white/80 backdrop-blur-md z-50 flex items-center justify-center transition-opacity duration-700">
        <div class="text-center">
            <svg class="animate-spin h-12 w-12 text-primary mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="text-gray-600 font-medium">Loading leaderboard...</p>
        </div>
    </div>

    <div id="content-container" class="container mx-auto space-y-6 px-2 sm:px-4 py-4 sm:py-6 opacity-0 transition-opacity duration-700 max-w-full">
    <div class="mb-6">
            <h1 class="text-2xl font-bold gradient-text text-center sm:text-left">Player Leaderboard</h1>
            <p class="text-sm text-gray-500 mt-1 text-center sm:text-left">Track individual player performance throughout the season</p>
            <div class="flex flex-wrap gap-4 mt-2">
                <a href="{{ url_for('team_management.dashboard') }}" class="inline-flex items-center text-primary hover:text-primary-dark text-center sm:text-left">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to Dashboard
        </a>
                <a href="{{ url_for('team_management.team_leaderboard') }}" class="inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    View Team Leaderboard
                </a>
            </div>
        </div>

        <!-- Category-wise Leaderboard -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-l-4 border-primary pl-3">Realplayers by Category</h2>
            <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl overflow-hidden border border-white/20">
                <div class="p-4 bg-white/30 border-b border-white/20 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                    <span class="text-sm font-medium text-gray-600">Filter by realplayer category</span>
                    <select id="realplayer-category" class="bg-white/50 backdrop-blur-sm rounded-full px-4 py-2 text-sm font-medium text-gray-700 border border-white/20 shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/50 w-full sm:w-auto">
                        <option value="all">All Categories</option>
                        <option value="red">Red</option>
                        <option value="black">Black</option>
                        <option value="blue">Blue</option>
                        <option value="orange">Orange</option>
                        <!-- Add other categories as needed -->
                </select>
    </div>
        <div class="responsive-table-container">
            <table class="min-w-full divide-y divide-gray-200/30 table-auto">
                <thead class="bg-white/30 backdrop-blur-md shadow-sm border-b border-white/20">
                    <tr>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Rank</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">NAME</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Category</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Team</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">M</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-16">W/D/L</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">G</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">GC</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">GD</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">P</th>
                    </tr>
                </thead>
                        <tbody id="category-leaderboard-body" class="bg-white/20 backdrop-blur-sm divide-y divide-gray-200/30">
                            {% for realplayer in realplayers %}
                            <tr class="hover:bg-white/30 transition-all duration-200 realplayer-row" data-category="{{ realplayer.category }}">
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm">
                                    {{ loop.index }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 relative">
                                            {% if realplayer.photo_url %}
                                            <img class="h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover border border-white/20" src="{{ realplayer.photo_url }}" alt="{{ realplayer.name }}">
                                            {% else %}
                                            <div class="h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gradient-to-br from-gray-500 to-gray-700 flex items-center justify-center text-white font-medium text-sm border border-white/20">
                                                {{ realplayer.name[:1] }}
                                            </div>
                                            {% endif %}
                                            <div class="absolute -top-1 -right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-sm" style="background-color: {{ realplayer.category_color }}">
                                                {{ realplayer.category[:1] }}
                                            </div>
                                        </div>
                                        <div class="ml-2 sm:ml-4">
                                            <div class="text-xs sm:text-sm font-medium text-gray-700">
                                                {{ realplayer.name }}
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="h-3 w-3 rounded-full mr-1 sm:mr-2" style="background-color: {{ realplayer.category_color }}"></div>
                                        <span class="text-xs sm:text-sm text-gray-600">{{ realplayer.category }}</span>
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.team }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.matches_played }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-medium rounded-md bg-white/50 backdrop-blur-sm border border-white/20 text-gray-700">
                                        {{ realplayer.wins }}/{{ realplayer.draws }}/{{ realplayer.losses }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-medium rounded-md bg-white/50 backdrop-blur-sm border border-white/20 text-gray-700">
                                        {{ realplayer.goals }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-medium rounded-md bg-white/50 backdrop-blur-sm border border-white/20 text-gray-700">
                                        {{ realplayer.goals_conceded }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-medium rounded-md bg-white/50 backdrop-blur-sm border border-white/20 text-gray-700">
                                        {{ realplayer.goal_difference }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-medium rounded-md bg-white/50 backdrop-blur-sm border border-white/20 text-gray-700">
                                        {{ realplayer.points }}
                                    </span>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="5" class="px-6 py-8 whitespace-nowrap text-center">
                                    <div class="flex flex-col items-center p-6 bg-white/30 backdrop-blur-sm rounded-xl max-w-md mx-auto border border-white/20">
                                        <svg class="w-12 h-12 text-gray-400 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        <p class="text-gray-700 font-medium mb-1">No realplayers found</p>
                                        <p class="text-sm text-gray-500">Realplayers will appear here when they are added to the system.</p>
                            </div>
                        </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Golden Boot Table (Most Goals) -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-l-4 border-amber-500 pl-3">Golden Boot</h2>
            <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl overflow-hidden border border-amber-200/30">
                <div class="p-4 bg-amber-50/30 border-b border-amber-100/30 flex items-center">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-amber-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5 5a3 3 0 015-2.236A3 3 0 0114.83 6H16a2 2 0 110 4h-5V9a1 1 0 10-2 0v1H4a2 2 0 110-4h1.17a3 3 0 010-1H2a2 2 0 100 4h1.17a3 3 0 015.66 0H16a2 2 0 100-4h-1.17A3 3 0 0115 2.236 3 3 0 0111.17 5H8.83A3 3 0 016 7.083 3 3 0 012.17 5H5z" clip-rule="evenodd" />
                        </svg>
                        <span class="text-xs sm:text-sm font-medium text-gray-600">Top goalscoring realplayers</span>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-amber-200/20 table-auto">
                        <thead class="bg-amber-50/30 backdrop-blur-md shadow-sm border-b border-amber-100/30">
                            <tr>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider">Rank</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider">NAME</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider">Team</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider w-6">M</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider w-6">G</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-amber-800 uppercase tracking-wider">Avg/M</th>
                            </tr>
                        </thead>
                        <tbody id="golden-boot-body" class="bg-white/20 backdrop-blur-sm divide-y divide-amber-200/20">
                            {% for realplayer in top_goalscorers %}
                            <tr class="hover:bg-amber-50/30 transition-all duration-200">
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        {% if loop.index == 1 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-amber-200 flex items-center justify-center text-amber-800 font-bold border border-amber-300 text-xs sm:text-sm">1</div>
                                        {% elif loop.index == 2 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-bold border border-gray-300 text-xs sm:text-sm">2</div>
                                        {% elif loop.index == 3 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-amber-700/40 flex items-center justify-center text-amber-900 font-bold border border-amber-800/30 text-xs sm:text-sm">3</div>
                                        {% else %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-white/50 flex items-center justify-center text-gray-700 font-medium text-xs sm:text-sm">{{ loop.index }}</div>
                                        {% endif %}
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 relative">
                                            {% if realplayer.photo_url %}
                                            <img class="h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover border border-white/20" src="{{ realplayer.photo_url }}" alt="{{ realplayer.name }}">
                                            {% else %}
                                            <div class="h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gradient-to-br from-amber-500 to-amber-700 flex items-center justify-center text-white font-medium text-sm border border-white/20">
                                                {{ realplayer.name[:1] }}
                                            </div>
                                            {% endif %}
                                            <div class="absolute -top-1 -right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-sm" style="background-color: {{ realplayer.category_color }}">
                                                {{ realplayer.category[:1] }}
                                            </div>
                                        </div>
                                        <div class="ml-2 sm:ml-4">
                                            <div class="text-xs sm:text-sm font-medium text-gray-700">
                                                {{ realplayer.name }}
                                            </div>
                                            <div class="text-xs text-gray-500">
                                                {{ realplayer.category }}
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.team }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.matches_played }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-bold rounded-md bg-amber-50 border border-amber-200 text-amber-700">
                                        {{ realplayer.goals }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ (realplayer.goals / realplayer.matches_played)|round(2) if realplayer.matches_played > 0 else 0 }}
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="6" class="px-6 py-8 whitespace-nowrap text-center">
                                    <div class="flex flex-col items-center p-6 bg-white/30 backdrop-blur-sm rounded-xl max-w-md mx-auto border border-white/20">
                                        <svg class="w-12 h-12 text-amber-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 14l9-5-9-5-9 5 9 5m0 0l9-5-9-5-9 5 9 5m0 0v12"></path>
                                        </svg>
                                        <p class="text-gray-700 font-medium mb-1">No goals scored yet</p>
                                        <p class="text-sm text-gray-500">Top scoring realplayers will appear here once matches are played.</p>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Golden Glove Table (Best Defensive Realplayers) -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-l-4 border-emerald-500 pl-3">Golden Glove</h2>
            <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl overflow-hidden border border-emerald-200/30">
                <div class="p-4 bg-emerald-50/30 border-b border-emerald-100/30 flex items-center">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-emerald-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M6.625 2.655A9 9 0 0119 11a1 1 0 11-2 0 7 7 0 00-9.625-6.492 1 1 0 11-.75-1.853zM4.662 4.959A1 1 0 014.75 6.37 6.97 6.97 0 003 11a1 1 0 11-2 0 8.97 8.97 0 012.25-5.953 1 1 0 011.412-.088z" clip-rule="evenodd" />
                            <path fill-rule="evenodd" d="M5 11a5 5 0 1110 0 1 1 0 11-2 0 3 3 0 10-6 0c0 1.677-.345 3.276-.968 4.729a1 1 0 11-1.838-.789A9.964 9.964 0 005 11zm8.921 2.012a1 1 0 01.831 1.145 19.86 19.86 0 01-.545 2.436 1 1 0 11-1.92-.558c.207-.713.371-1.445.49-2.192a1 1 0 011.144-.83z" clip-rule="evenodd" />
                        </svg>
                        <span class="text-xs sm:text-sm font-medium text-gray-600">Best defensive record (least goals conceded)</span>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-emerald-200/20 table-auto">
                        <thead class="bg-emerald-50/30 backdrop-blur-md shadow-sm border-b border-emerald-100/30">
                            <tr>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider">Rank</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider">NAME</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider">Team</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider w-6">M</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider w-6">GC</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-emerald-800 uppercase tracking-wider">Avg/M</th>
                            </tr>
                        </thead>
                        <tbody id="golden-glove-body" class="bg-white/20 backdrop-blur-sm divide-y divide-emerald-200/20">
                            {% for realplayer in top_defenders %}
                            <tr class="hover:bg-emerald-50/30 transition-all duration-200">
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        {% if loop.index == 1 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-emerald-200 flex items-center justify-center text-emerald-800 font-bold border border-emerald-300 text-xs sm:text-sm">1</div>
                                        {% elif loop.index == 2 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-bold border border-gray-300 text-xs sm:text-sm">2</div>
                                        {% elif loop.index == 3 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-emerald-700/40 flex items-center justify-center text-emerald-900 font-bold border border-emerald-800/30 text-xs sm:text-sm">3</div>
                                        {% else %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-white/50 flex items-center justify-center text-gray-700 font-medium text-xs sm:text-sm">{{ loop.index }}</div>
                                        {% endif %}
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 relative">
                                            {% if realplayer.photo_url %}
                                            <img class="h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover border border-white/20" src="{{ realplayer.photo_url }}" alt="{{ realplayer.name }}">
                                            {% else %}
                                            <div class="h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gradient-to-br from-emerald-500 to-emerald-700 flex items-center justify-center text-white font-medium text-sm border border-white/20">
                                                {{ realplayer.name[:1] }}
                                            </div>
                                            {% endif %}
                                            <div class="absolute -top-1 -right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-sm" style="background-color: {{ realplayer.category_color }}">
                                                {{ realplayer.category[:1] }}
                                            </div>
                                        </div>
                                        <div class="ml-2 sm:ml-4">
                                            <div class="text-xs sm:text-sm font-medium text-gray-700">
                                                {{ realplayer.name }}
                                            </div>
                                            <div class="text-xs text-gray-500">
                                                {{ realplayer.category }}
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.team }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.matches_played }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-bold rounded-md bg-emerald-50 border border-emerald-200 text-emerald-700">
                                        {{ realplayer.goals_conceded }}
                                    </span>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ (realplayer.goals_conceded / realplayer.matches_played)|round(2) if realplayer.matches_played > 0 else 0 }}
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="6" class="px-6 py-8 whitespace-nowrap text-center">
                                    <div class="flex flex-col items-center p-6 bg-white/30 backdrop-blur-sm rounded-xl max-w-md mx-auto border border-white/20">
                                        <svg class="w-12 h-12 text-emerald-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                        </svg>
                                        <p class="text-gray-700 font-medium mb-1">No defensive data yet</p>
                                        <p class="text-sm text-gray-500">Defensive stats for realplayers will appear once matches are played.</p>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Golden Ball Table (Best Overall Realplayers) -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-l-4 border-blue-500 pl-3">Golden Ball</h2>
            <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl overflow-hidden border border-blue-200/30">
                <div class="p-4 bg-blue-50/30 border-b border-blue-100/30 flex items-center">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-blue-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <span class="text-xs sm:text-sm font-medium text-gray-600">Best overall realplayers</span>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-blue-200/20 table-auto">
                        <thead class="bg-blue-50/30 backdrop-blur-md shadow-sm border-b border-blue-100/30">
                            <tr>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider">Rank</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider">NAME</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider">Team</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider w-6">M</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider w-6">POTM</th>
                                <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-blue-800 uppercase tracking-wider w-6">P</th>
                            </tr>
                        </thead>
                        <tbody id="golden-ball-body" class="bg-white/20 backdrop-blur-sm divide-y divide-blue-200/20">
                            {% for realplayer in best_realplayers %}
                            <tr class="hover:bg-blue-50/30 transition-all duration-200">
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        {% if loop.index == 1 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-blue-200 flex items-center justify-center text-blue-800 font-bold border border-blue-300 text-xs sm:text-sm">1</div>
                                        {% elif loop.index == 2 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-bold border border-gray-300 text-xs sm:text-sm">2</div>
                                        {% elif loop.index == 3 %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-blue-700/40 flex items-center justify-center text-blue-900 font-bold border border-blue-800/30 text-xs sm:text-sm">3</div>
                                        {% else %}
                                        <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-white/50 flex items-center justify-center text-gray-700 font-medium text-xs sm:text-sm">{{ loop.index }}</div>
                                        {% endif %}
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 relative">
                                            {% if realplayer.photo_url %}
                                            <img class="h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover border border-white/20" src="{{ realplayer.photo_url }}" alt="{{ realplayer.name }}">
                                            {% else %}
                                            <div class="h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white font-medium text-sm border border-white/20">
                                                {{ realplayer.name[:1] }}
                                            </div>
                                            {% endif %}
                                            <div class="absolute -top-1 -right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-sm" style="background-color: {{ realplayer.category_color }}">
                                                {{ realplayer.category[:1] }}
                                            </div>
                                        </div>
                                        <div class="ml-2 sm:ml-4">
                                            <div class="text-xs sm:text-sm font-medium text-gray-700">
                                                {{ realplayer.name }}
                                            </div>
                                            <div class="text-xs text-gray-500">
                                                {{ realplayer.category }}
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.team }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.matches_played }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                    {{ realplayer.potm_count }}
                                </td>
                                <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                    <span class="px-2 py-1 text-xs sm:text-sm font-bold rounded-md bg-blue-50 border border-blue-200 text-blue-700">
                                        {{ realplayer.points }}
                                    </span>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="8" class="px-6 py-8 whitespace-nowrap text-center">
                                    <div class="flex flex-col items-center p-6 bg-white/30 backdrop-blur-sm rounded-xl max-w-md mx-auto border border-white/20">
                                        <svg class="w-12 h-12 text-blue-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                        </svg>
                                        <p class="text-gray-700 font-medium mb-1">No player ratings yet</p>
                                        <p class="text-sm text-gray-500">Best realplayers will appear here once matches are played and ratings are calculated.</p>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Tournament Round Performance -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-l-4 border-primary pl-3">Tournament Round Performance</h2>
            <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl overflow-hidden border border-white/20">
                <div class="flex border-b border-white/20 bg-white/30 backdrop-blur-md overflow-x-auto">
                    <div class="round-tab active cursor-pointer px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 border-primary text-primary" data-round="round1">Rounds 1-7</div>
                    <div class="round-tab cursor-pointer px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800" data-round="round2">Rounds 8-14</div>
                    <div class="round-tab cursor-pointer px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800" data-round="round3">Rounds 15-21</div>
                    <div class="round-tab cursor-pointer px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800" data-round="round4">Rounds 22+</div>
    </div>

                <div id="weekly-content-container" class="bg-white/10 backdrop-blur-sm">
                    <div id="round1-content" class="round-content active overflow-x-auto">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200/30 table-auto">
                                <thead class="bg-white/20 backdrop-blur-md shadow-sm">
                                    <tr>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">NAME</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Team</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">M</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-16">W/D/L</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">GS</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">GC</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">GD</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">POTM</th>
                                        <th scope="col" class="px-2 sm:px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider w-6">P</th>
                                    </tr>
                                </thead>
                                <tbody id="round1-body" class="bg-white/10 backdrop-blur-sm divide-y divide-gray-200/20">
                                    {% for player in round1_stats %}
                                    <tr class="hover:bg-white/30 transition-all duration-200">
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 relative">
                                                    {% if player.photo_url %}
                                                    <img class="h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover border border-white/20" src="{{ player.photo_url }}" alt="{{ player.name }}">
                                                    {% else %}
                                                    <div class="h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gradient-to-br from-gray-500 to-gray-700 flex items-center justify-center text-white font-medium text-sm border border-white/20">
                                                        {{ player.name[:1] }}
                                                    </div>
                                                    {% endif %}
                                                    <div class="absolute -top-1 -right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-sm" style="background-color: {{ player.category_color }}">
                                                        {{ player.category[:1] }}
                                                    </div>
                                                </div>
                                                <div class="ml-2 sm:ml-4">
                                                    <div class="text-xs sm:text-sm font-medium text-gray-700">
                                                        {{ player.name }}
                                                    </div>
                                                    <div class="text-xs text-gray-500">
                                                        {{ player.category }}
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.team }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.matches_played }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.wins }}/{{ player.draws }}/{{ player.losses }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.goals }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.goals_conceded }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.goal_difference }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-600">
                                            {{ player.potm_count }}
                                        </td>
                                        <td class="px-2 sm:px-4 py-3 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs sm:text-sm font-bold rounded-md bg-white/50 border border-white/20 text-gray-700">
                                                {{ player.points }}
                                            </span>
                                        </td>
                                    </tr>
                                    {% else %}
                                    <tr>
                                        <td colspan="9" class="px-4 sm:px-6 py-8 whitespace-nowrap text-center">
                                            <div class="flex flex-col items-center p-4 sm:p-6 bg-white/30 backdrop-blur-sm rounded-xl max-w-md mx-auto border border-white/20">
                                                <svg class="w-10 h-10 sm:w-12 sm:h-12 text-gray-400 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                                </svg>
                                                <p class="text-gray-700 font-medium mb-1">No data for this round</p>
                                                <p class="text-xs sm:text-sm text-gray-500">Player statistics will appear here once matches are played in this round.</p>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legend for stat abbreviations -->
        <div class="glass-card backdrop-blur-lg shadow-sm rounded-2xl p-5 border border-white/20 mb-8">
            <h3 class="text-base font-medium text-gray-700 mb-3">Legend</h3>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-y-3 gap-x-4 text-sm">
            <div class="flex items-center">
                <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">GS</span>
                    <span class="text-gray-600">Goals Scored</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">GC</span>
                    <span class="text-gray-600">Goals Conceded</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">GD</span>
                    <span class="text-gray-600">Goal Difference</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">POTM</span>
                    <span class="text-gray-600">Player of the Match</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">P</span>
                    <span class="text-gray-600">Points</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">M</span>
                    <span class="text-gray-600">Matches</span>
            </div>
            <div class="flex items-center">
                    <span class="w-5 h-5 inline-flex mr-2 rounded-full bg-white/40 backdrop-blur-sm items-center justify-center text-xs font-medium text-gray-600 border border-white/20 shadow-sm">W/D/L</span>
                    <span class="text-gray-600">Wins/Draws/Losses</span>
            </div>
        </div>
    </div>

        <!-- Information note at bottom -->
        <div class="mt-4 text-center text-sm text-gray-500 mb-6">
            <p>Tap on a player row to see detailed performance statistics</p>
    </div>
</div>

<script>
    // Loading animation
    document.addEventListener('DOMContentLoaded', function() {
        // Hide loading overlay and show content with a fade effect
        const loadingOverlay = document.getElementById('loading-overlay');
        const contentContainer = document.getElementById('content-container');
        
        // Use a short timeout to ensure the transition effect works properly
        setTimeout(() => {
            loadingOverlay.style.opacity = '0';
            contentContainer.style.opacity = '1';
            
            // After the transition completes, remove the overlay from the DOM
                setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 700); // Match this timing with the CSS transition duration
        }, 800); // Slight delay to ensure page elements are loaded
        
        // Round tabs functionality
        const roundTabs = document.querySelectorAll('.round-tab');
        const roundContents = document.querySelectorAll('.round-content');
        
        roundTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                roundTabs.forEach(t => {
                    t.classList.remove('active');
                    t.classList.remove('border-primary', 'text-primary');
                    t.classList.add('border-transparent', 'text-gray-600');
                });
                
                // Add active class to clicked tab
                tab.classList.add('active');
                tab.classList.add('border-primary', 'text-primary');
                
                // Get the round ID from the data attribute
                const roundId = tab.getAttribute('data-round');
                
                // Hide all content sections
                roundContents.forEach(content => {
                    content.classList.add('hidden');
                    content.classList.remove('active');
                });
                
                // Show the selected content
                const activeContent = document.getElementById(`${roundId}-content`);
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                    activeContent.classList.add('active');
                }
            });
        });
        
        // Category filter handler
        const realplayerCategory = document.getElementById('realplayer-category');
        if (realplayerCategory) {
            realplayerCategory.addEventListener('change', function() {
                const selectedCategory = this.value;
                const rows = document.querySelectorAll('.realplayer-row');
                
                rows.forEach(row => {
                    if (selectedCategory === 'all' || row.dataset.category === selectedCategory) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        }

        // Detect if the device is touch-enabled
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        // Add a class to the body to help with touch-specific styling
        if (isTouchDevice) {
            document.body.classList.add('touch-device');
        }
        
        // Check if tables need adjustments for small screens
        function adjustTables() {
            if (window.innerWidth < 640) {
                // Apply fixes for mobile view here if needed
                document.querySelectorAll('.overflow-x-auto').forEach(el => {
                    el.classList.remove('overflow-x-auto');
                    el.classList.add('responsive-table-container');
                });
            }
        }
        
        // Run on load and on resize
        adjustTables();
        window.addEventListener('resize', adjustTables);
    });
</script>
{% endblock %}

{% block styles %}
    {{ super() }}
    <style>
        /* Vision OS Glass Morphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px 0 rgba(31, 38, 135, 0.07);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            box-shadow: 0 8px 20px 0 rgba(31, 38, 135, 0.1);
        }
        
        /* Gradient text for headings */
        .gradient-text {
            background: linear-gradient(135deg, #3182ce, #63b3ed);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Loading animation */
        #loading-overlay {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        /* Responsive adjustments */
        @media (max-width: 640px) {
            .glass-card {
                border-radius: 16px !important;
            }
            
            /* Prevent horizontal scrolling on tables on small screens */
            .overflow-x-auto {
                overflow-x: visible;
            }
            
            table {
                width: 100%;
                table-layout: fixed;
            }
            
            /* Make tables more compact on mobile */
            th, td {
                padding-left: 0.35rem !important;
                padding-right: 0.35rem !important;
                font-size: 0.7rem !important;
            }
            
            /* Adjust column widths for smaller screens */
            th:first-child, td:first-child,
            th:nth-child(2), td:nth-child(2) {
                width: auto;
            }
            
            th:nth-child(n+3), td:nth-child(n+3) {
                width: 8% !important;
            }
        }
        
        /* Interactive elements */
        .round-tab {
            transition: all 0.2s ease;
        }
        
        /* Table row hover effects */
        tbody tr {
            transition: all 0.2s ease;
        }
        
        tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.5) !important;
            backdrop-filter: blur(8px);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        
        /* Touch device specific styles */
        .touch-device tbody tr:active {
            background-color: rgba(255, 255, 255, 0.7) !important;
        }
        
        /* Legend item interactions */
        .flex.items-center {
            transition: transform 0.2s ease;
        }
        
        :not(.touch-device) .flex.items-center:hover {
            transform: translateY(-2px);
        }
        
        /* Animation for tab content switching */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .round-content.active {
            animation: fadeIn 0.3s ease forwards;
        }
    </style>
{% endblock %} 